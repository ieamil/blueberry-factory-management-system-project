<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Order Management</title>
  <link rel="stylesheet" href="css/order-management.css">
  <link rel="stylesheet" href="css/common.css">
  <link rel="icon" href="images/factoryLogo.png" type="image/png">
  <script src="javascript/order-management.js" defer></script>
</head>
<body>
  
  <div id="common-components"></div>

  <div class="content">
    <h2>Order Management</h2>
  
    <div class="forms-and-table-container">
      <!-- Create New Order Section -->
      <div class="form-section">
        <h3>Create New Order</h3>
        <form id="create-order-form">
          <!-- Select Customer -->
          <label for="select-customer">Select Customer:</label>
          <select id="select-customer" required>
            <option value="">Select Customer</option>
            <option value="new">New Customer</option>
          </select>

          <!-- Yeni Müşteri  -->
          <div id="new-customer-details" style="display: none;">
            <label for="new-customer-name">Customer Name:</label>
            <input type="text" id="new-customer-name" placeholder="Enter customer name" required>
        
            <label for="customer-contact">Contact:</label>
            <input type="email" id="customer-contact" placeholder="Enter email" required>
        
            <label for="customer-address">Address:</label>
            <input type="text" id="customer-address" placeholder="Enter address" required>
          </div>

          <!-- Select Product -->
          <label for="select-product">Select Product:</label>
          <select id="select-product" required>
            <option value="">Select Product</option>
            <!-- Ürünler dinamik  -->
          </select>

          <label for="product-category">Category</label>
          <input type="text" id="product-category" readonly />

          <label for="order-quantity">Order Quantity (units):</label>
          <input type="number" id="order-quantity" placeholder="Enter quantity" required min="0">

          <label for="total-price">Total Price:</label>
          <input type="text" id="total-price" placeholder="Total price ($)" readonly min="1">

          <label for="order-date">Order Date:</label>
          <input type="date" id="order-date" required>

          <button type="submit">Create Order</button>
        </form>
      </div>

<!-- Tüm Siparişler  -->
<div class="table-section">
  <!-- Filtreleme -->
      <div class="filter-section">
        <input type="text" id="search-order-input" placeholder="Search by Customer or Order ID">
        <select id="filter-by-status">
          <option value="All">Filter by Status</option>
          <option value="Pending">Pending</option>
          <option value="Processed">Processed</option>
          <option value="Shipped">Shipped</option>
          <option value="Delivered">Delivered</option>
        </select>
      </div>

      <h3>All Orders</h3>
      <table id="all-orders-table">
        <thead>
          <tr>
            <th>Order ID</th>
            <th>Customer Name</th>
            <th>Product Name</th>
            <th>Product Category</th> 
            <th>Quantity</th>
            <th>Total Price ($)</th>
            <th>Order Status</th>
            <th>Order Date</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          <!-- Dinamik -->
        </tbody>
      </table>
    </div>


      <!-- Gelir Hesaplama Alanı -->
      <div class="revenue-section">
        <h3>Revenue Calculation</h3>
        <div id="revenue-report">
          <p><strong>Total Revenue: </strong><span id="total-revenue">0.00 ₺</span></p>
          <h4>Revenue Per Category</h4>
          <div id="revenue-category-report">
          </div>
          <h3>Revenue Per Product</h3>
          <div id="revenue-product-report">
          </div>
        </div>
      </div>


      <!-- Satış Raporları -->
      <div class="sales-report-section">
        <h3>Sales Reports</h3>
        <div id="units-sold-report">
        </div>

        <div id="revenue-category-report">
        </div>

        <div id="overall-revenue-report">
        </div>

        <!-- Grafik Alanı -->
        <div class="sales-report-section">
          <h3>Sales Reports</h3>
          <canvas id="salesBarChart"></canvas> <!-- Çubuk grafik -->
        </div>

        <!-- CSV olarak dışa aktar -->
        <button id="download-report">Download Report (CSV)</button>
      </div>



  <div>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Order Management</title>
    <link rel="stylesheet" href="order-management.css">
    <link rel="stylesheet" href="common.css">
    <link rel="icon" href="images/factoryLogo.png" type="image/png">
    
    <!-- Chart.js  -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  </div>
  
  <script>
    document.addEventListener("DOMContentLoaded", function () {
      fetch("sidebar-topbar.html")
        .then((response) => response.text())
        .then((html) => {
          document.getElementById("common-components").innerHTML = html;
        })
        .catch((error) => console.error("Failed to load sidebar and topbar:", error));
    });
  </script>
</body>
</html>